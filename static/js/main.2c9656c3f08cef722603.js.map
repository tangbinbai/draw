{"version":3,"file":"static/js/main.2c9656c3f08cef722603.js","mappings":"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","sources":["webpack:///webpack/runtime/chunk loaded","webpack:///./typescript/core/event/eventAgent.ts","webpack:///./typescript/core/common/util.ts","webpack:///./typescript/core/render/util.ts","webpack:///./typescript/core/node/util.ts","webpack:///./typescript/core/node/node.ts","webpack:///./typescript/core/matrix/applyToPoint.ts","webpack:///./typescript/core/matrix/utils.ts","webpack:///./typescript/core/matrix/translate.ts","webpack:///./typescript/core/matrix/transform.ts","webpack:///./typescript/core/matrix/rotate.ts","webpack:///./typescript/core/matrix/scale.ts","webpack:///./typescript/core/matrix/skew.ts","webpack:///./typescript/core/stage/stage.ts","webpack:///./typescript/core/matrix/inverse.ts","webpack:///./typescript/core/layout/index.ts","webpack:///./typescript/core/node/ImageSprite.ts","webpack:///./typescript/core/interactive/index.ts","webpack:///./typescript/components/rootNode.ts","webpack:///./typescript/components/coordinate.ts","webpack:///./typescript/components/iframe.ts","webpack:///./typescript/components/nodeControl.ts","webpack:///./typescript/functions/func.ts","webpack:///./typescript/functions/pasteImages.ts","webpack:///./typescript/index.ts","webpack:///./typescript/core/render/render.ts","webpack:///./typescript/core/interactive/util.ts","webpack:///./typescript/core/interactive/keycodeMap.ts","webpack:///./typescript/core/interactive/dragNode.ts","webpack:///./typescript/functions/lib/potpack.ts","webpack:///webpack/bootstrap","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/jsonp chunk loading","webpack:///webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","type EventType = 'tapstart' | 'tapmove' | 'tapend' | 'onblur' | 'onload' | 'delete' | 'flip' | 'tap';\nclass EventAgent {\n  events: object;\n\n  constructor() {\n    this.events = {};\n  }\n\n  register(type: EventType, eventFunc: Function) {\n    // 添加事件对象\n    if (!this.events[type]) {\n      this.events[type] = [];\n    }\n    this.events[type].push(eventFunc);\n  }\n\n  removeEvent(type: string, eventFunc: Function) {\n    if (typeof this.events === 'undefined') {\n      this.events = {};\n    }\n    if (this.events[type] instanceof Array) {\n      const events = this.events[type];\n      for (let i = 0, len = events.length; i < len; i++) {\n        if (events[i] === eventFunc) {\n          events.splice(i, 1);\n          break;\n        }\n      }\n    }\n  }\n\n  trigger(type: string, data?: any) {\n    if (!this.events[type]) {\n      return;\n    }\n    const events = this.events[type];\n    for (let i = 0, len = events.length; i < len; i++) {\n      events[i].call(this, data);\n    }\n  }\n}\nexport default EventAgent;\n","import { Color } from '../types';\n\n/**\n * @description 深度拷贝\n */\nconst type = (obj: Object) => {\n  const { toString } = Object.prototype;\n  const map = {\n    '[object Boolean]': 'boolean',\n    '[object Number]': 'number',\n    '[object String]': 'string',\n    '[object Function]': 'function',\n    '[object Array]': 'array',\n    '[object Date]': 'date',\n    '[object RegExp]': 'regExp',\n    '[object Undefined]': 'undefined',\n    '[object Null]': 'null',\n    '[object Object]': 'object',\n  };\n  return map[toString.call(obj)];\n};\nconst deepClone = (data: any) => {\n  const t = type(data); let o: any; let i; let ni;\n  if (t === 'array') {\n    o = [];\n  } else if (t === 'object') {\n    o = {};\n  } else {\n    return data;\n  }\n  if (t === 'array') {\n    for (i = 0, ni = data.length; i < ni; i++) {\n      o.push(deepClone(data[i]));\n    }\n    return o;\n  } if (t === 'object') {\n    for (i in data) {\n      o[i] = deepClone(data[i]);\n    }\n    return o;\n  }\n};\nconst colorToString = (color: Color) => `rgba(${color[0]},${color[1]},${color[2]},${color[3]})`;\n\nconst imagesCache = new Map();\nconst loadImage = (src: string, callback: Function): HTMLImageElement => {\n  if (imagesCache.has(src)) {\n    if (callback) callback(imagesCache.get(src));\n    return imagesCache.get(src);\n  }\n  const img = new Image();\n  img.crossOrigin = 'anonymous';\n  img.onload = () => {\n    imagesCache.set(src, img);\n    if (callback) callback(img);\n  };\n  img.onerror = () => {\n    if (callback) callback(null);\n  };\n  img.src = src;\n  return img;\n};\n\nconst preLoadImages = (imagesList: any, callback: any) => {\n  let count = imagesList.length;\n  imagesList.forEach((src: string) => {\n    loadImage(src, () => {\n      // console.log(`load image path(${count}):${src}`);\n      count--;\n      if (count === 0 && callback) {\n        callback();\n      }\n    });\n  });\n};\nexport {\n  loadImage,\n  deepClone,\n  colorToString,\n  preLoadImages,\n};\n","import { Styles, Color } from '../types';\nimport Node from '../node/node';\n\nconst renderPoint = (ctx: CanvasRenderingContext2D, node: Node) => {\n  ctx.beginPath();\n  ctx.moveTo(node.drawPoints[0], node.drawPoints[1]);\n  for (let index = 2; index < node.drawPoints.length; index += 2) {\n    ctx.lineTo(node.drawPoints[index], node.drawPoints[index + 1]);\n  }\n  ctx.closePath();\n  ctx.fill();\n  if (node.lineWidth) ctx.stroke();\n};\n\nconst setDrawStyle = (ctx: CanvasRenderingContext2D, styles: Styles) => {\n  const fillStyle = `rgba(\n    ${styles.fillStyle.join(',')}\n  )`;\n  const strokeStyle = `rgba(\n    ${styles.strokeStyle.join(',')}\n  )`;\n  ctx.fillStyle = fillStyle;\n  if (styles.lineWidth) {\n    ctx.strokeStyle = strokeStyle;\n    ctx.lineWidth = styles.lineWidth;\n  } else {\n    ctx.strokeStyle = 'rgba(0,0,0,0)';\n  }\n};\n\nconst drawGeneralShape = (\n  ctx: CanvasRenderingContext2D,\n  node: Node,\n) => {\n  // 不满足绘制条件\n  if (node.drawPoints.length < 4) {\n    return;\n  }\n  renderPoint(ctx, node);\n};\n\nconst renderNode = (ctx: CanvasRenderingContext2D, node: Node) => {\n  if (node.visible) {\n    drawCurrentObject(ctx, node);\n    if (node.children.length > 0) {\n      node.children.sort((a, b) => a.zIndex - b.zIndex);\n      node.children.forEach((node) => {\n        renderNode(ctx, node);\n      });\n    }\n  }\n};\n\nconst drawCurrentObject = (ctx: CanvasRenderingContext2D, node: Node) => {\n  // specal background color, Usually used in debuggers\n  drawBackgroundColor(ctx, node);\n  ctx.save();\n  setDrawStyle(\n    ctx,\n    {\n      fillStyle: node.fillStyle as Color,\n      strokeStyle: node.strokeStyle as Color,\n      lineWidth: node.lineWidth,\n    },\n  );\n  if (node.beforeDraw) node.beforeDraw(ctx);\n  node.draw(ctx);\n  node.afterDraw?.(ctx);\n  ctx.restore();\n};\n\nconst drawBackgroundColor = (ctx: CanvasRenderingContext2D, node: Node) => {\n  if (!node.backgroundColor) {\n    return;\n  }\n  const fillStyle = `rgba(${node.backgroundColor.join(',')})`;\n  ctx.fillStyle = fillStyle;\n  renderPoint(ctx, node);\n};\n\nexport { drawGeneralShape, setDrawStyle, renderPoint, renderNode };\n","import { Vec2 } from '../types';\n\nconst canvas = document.createElement('canvas');\nconst ctx = canvas.getContext('2d');\n\nconst calculateSize = (points: Array<number>) => {\n  const groupX = points.filter(\n    (point, index) => !(index % 2),\n  ).sort(\n    (beforeX, afterX) => beforeX - afterX,\n  );\n  const groupY = points.filter(\n    (point, index) => index % 2,\n  ).sort(\n    (beforeY, afterY) => beforeY - afterY,\n  );\n  const width = groupX[groupX.length - 1] - groupX[0];\n  const height = groupY[groupY.length - 1] - groupY[0];\n  return {\n    x: groupX[0],\n    y: groupY[0],\n    width,\n    height,\n  };\n};\n\nconst getTwoPointsDistance = (xA: number, yA: number, xB: number, yB: number) => Math.sqrt((xA - xB) * (xA - xB) + (yA - yB) * (yA - yB));\n\nconst getTwoPointsVector = (startP: Vec2, endP: Vec2): Vec2 => [endP[0] - startP[0], endP[1] - startP[1]];\n\nconst caculateRotateAngle = (drawPoints: number[]) => {\n  const K = (drawPoints[3] - drawPoints[1]) / (drawPoints[2] - drawPoints[0]);\n  let angle = (Math.atan(K) * 180) / Math.PI; // eslint-disable-line\n\n  if (drawPoints[0] > drawPoints[2]) {\n    angle += 180;\n  }\n  return (angle * Math.PI) / 180;\n};\n\nconst isInPath = (point: number[], points: number[]): boolean => {\n  if (!ctx) return false;\n  ctx.beginPath();\n  ctx.moveTo(points[0], points[1]);\n  for (let index = 2; index < points.length; index += 2) {\n    ctx.lineTo(points[index], points[index + 1]);\n  }\n  ctx.closePath();\n  if (ctx.isPointInPath(point[0], point[1])) {\n    return true;\n  }\n  return false;\n};\n\nexport {\n  calculateSize,\n  isInPath,\n  getTwoPointsDistance,\n  caculateRotateAngle,\n  getTwoPointsVector,\n};\n","/*\n * @Author: bowentang\n * @Date: 2021-08-27 15:25:32\n * @LastEditTime: 2021-11-21 01:49:14\n * @FilePath: /draw/src/ts/sprite.ts\n * @Description: 精灵的基类\n */\nimport { Color, Vec2 } from '../types';\nimport { deepClone } from '../common/util';\nimport { drawGeneralShape } from '../render/util';\nimport EventAgent from '../event/eventAgent';\nimport { isInPath } from './util';\n\ntype LayoutType = 'leftTop' | 'rightTop' | 'rightBottom' | 'leftBottom' | 'center' | 'leftCenter' | 'rightCenter' | null;\ntype NodeType = 'node' | 'shape' | 'image' | 'text' | 'other';\nexport interface NodeProperties {\n  type?: NodeType;\n  name?: string;\n  id?: string;\n  x?: number;\n  y?: number;\n  width?: number;\n  height?: number;\n  active?: boolean;\n  translate?: Vec2;\n  origin?: number[];\n  rotate?: number;\n  scale?: number;\n  zIndex?: number;\n  visible?: boolean;\n  enableDrag?: boolean;\n  enableClick?: boolean;\n  parent?: Node;\n  children?: Node[];\n  points?: number[];\n  layout?: LayoutType;\n  fillStyle?: Color;\n  strokeStyle?: Color;\n  backgroundColor?: Color;\n  lineWidth?: number;\n  skew?: Vec2,\n  flip?: boolean,\n  opacity?: number,\n  // backgroundStrokeStyle?: Color;\n  matrix?: object,\n  extra?: any\n}\n\nclass Node extends EventAgent {\n  public type = 'node';\n\n  public name = '';\n\n  public id = '';\n\n  public x = 0;\n\n  public y = 0;\n\n  public width = 0;\n\n  public height = 0;\n\n  public active = false;\n\n  public translate: Vec2 = [0, 0];\n\n  public scale = 1;\n\n  public origin = [0.5, 0.5];\n\n  public rotate = 0;\n\n  public zIndex = 0;\n\n  public visible = true;\n\n  public enableDrag = false;\n\n  public enableClick = true;\n\n  public parent: Node | null = null;\n\n  public children: Node[] = [];\n\n  public points: number[] = [0, 0, 1, 0, 1, 1, 0, 1];\n\n  public layout = 'LeftTop';\n\n  public drawPoints: number[] = [];\n\n  public fillStyle = [0, 0, 0, 0];\n\n  public strokeStyle = [0, 0, 0, 0];\n\n  public lineWidth = 0;\n\n  public backgroundColor = null;\n\n  public skew = [0, 0];\n\n  public flip = false;\n\n  public matrix = null;\n\n  public extra: any = {};\n\n  public opacity = 1;\n\n  constructor(params?: NodeProperties) {\n    super();\n    for (const i in params) {\n      this[i] = params[i];\n    }\n    // console.log(this);\n  }\n\n  appendNode(sprite: Node) {\n    if (sprite instanceof Array) {\n      sprite.forEach((item) => {\n        this.appendNode(item);\n      });\n      // todo 排除重复添加\n    } else {\n      if (this.children.includes(sprite)) return;\n      this.children.push(sprite);\n      sprite.parent = this;\n    }\n  }\n\n  removeNode(sprite: Node) {\n    this.children.forEach((child, index) => {\n      if (child === sprite) {\n        this.children.splice(index, 1);\n      }\n    });\n  }\n\n  setSize(size: Vec2) {\n    [this.width, this.height] = size;\n  }\n\n  getSize(): Vec2 {\n    return [\n      this.width,\n      this.height,\n    ];\n  }\n\n  setTranslate(translate: Vec2) {\n    this.translate = translate;\n  }\n\n  getTranslate(): Vec2 {\n    return this.translate;\n  }\n\n  getPostion() {\n    return [this.x, this.y];\n  }\n\n  setPostion(position: Vec2) {\n    [this.x, this.y] = position;\n  }\n\n  setRotate(value: number) {\n    this.rotate = value;\n    return this;\n  }\n\n  getParams(): any {\n    const spriteConfig = {};\n    const names = Object.getOwnPropertyNames(this);\n    // 简化names,和基础属性一致的不需要;\n    names.forEach((name) => {\n      if (!['parent', 'children'].includes(name)) {\n        spriteConfig[name] = deepClone(this[name]);\n      }\n    });\n    return spriteConfig;\n  }\n\n  clone() {\n    const params = this.getParams();\n    return params;\n  }\n\n  beforeLayout() { }\n\n  afterLayout() {}\n\n  beforeDraw(ctx: CanvasRenderingContext2D) {\n    return ctx;\n  }\n\n  // 边界规则\n  isBoundingBox(point: Vec2): boolean {\n    const result = isInPath(point, this.drawPoints);\n    return result;\n  }\n\n  getNodeByPoint(point: Vec2): Node[] {\n    const nodes: Node[] = [];\n    const getNode = (node: Node) => {\n      if (node.enableClick && node.isBoundingBox(point)) {\n        nodes.push(node);\n      }\n      if (node.children.length > 0) {\n        node.children.forEach((node) => {\n          getNode(node);\n        });\n      }\n    };\n    getNode(this);\n    return nodes;\n  }\n\n  draw(ctx: CanvasRenderingContext2D) {\n    ctx.save();\n    ctx.globalAlpha = this.opacity;\n    drawGeneralShape(\n      ctx,\n      this,\n    );\n    ctx.restore();\n  }\n\n  afterDraw(ctx: CanvasRenderingContext2D) {\n    // ctx.fillStyle = 'rgba(255,255,255,1)';\n    // ctx.font = '16px PingFangSC-Regular';\n    // ctx.fillText(\n    //   `currentNode: x:${Math.round(this.x)}, y:${Math.round(this.y)}, scale:${this.scale}`,\n    //   this.drawPoints[0] + 0,\n    //   this.drawPoints[1] + 20,\n    // );\n    return ctx;\n  }\n}\nexport default Node;\n","/**\n * Calculate a point transformed with an affine matrix\n * @param matrix {Matrix} Affine Matrix\n * @param  point {Point} Point\n * @returns {Point} Point\n */\nexport function applyToPoint(matrix: any, point: any) {\n  return [\n    matrix.a * point[0] + matrix.c * point[1] + matrix.e,\n    matrix.b * point[0] + matrix.d * point[1] + matrix.f,\n  ];\n}\n\n/**\n * Calculate an array of points transformed with an affine matrix\n * @param matrix {Matrix} Affine Matrix\n * @param points {Point[]} Array of point\n * @returns {Point[]} Array of point\n */\nexport function applyToPoints(matrix: any, points: number[]): number[] {\n  let newPoints: number[] = [];\n  for (let i = 0; i < points.length; i += 2) {\n    newPoints = newPoints.concat(applyToPoint(matrix, [points[i], points[i + 1]]));\n  }\n  return newPoints;\n  // return points.map(point => applyToPoint(matrix, point))\n}\n","export function isUndefined(val: any) {\n  return typeof val === 'undefined';\n}\n\nexport function isNumeric(n: any) {\n  return typeof n === 'number' &&\n    !Number.isNaN(n) &&\n    Number.isFinite(n);\n}\n\nexport function isObject(obj: any) {\n  return typeof obj === 'object' &&\n    obj !== null &&\n    !Array.isArray(obj);\n}\n\nexport function matchesShape(obj: any, keys: any) {\n  return keys.every((key: any) => key in obj);\n}\n","/**\n * Calculate a translate matrix\n * @param tx {number} Translation on axis x\n * @param [ty = 0] {number} Translation on axis y\n * @returns {Matrix} Affine Matrix\n */\nexport function translate(tx: number, ty = 0) {\n  return {\n    a: 1,\n    c: 0,\n    e: tx,\n    b: 0,\n    d: 1,\n    f: ty,\n  };\n}\n","/**\n * Merge multiple matrices into one\n * @param matrices {...Matrix | Matrix[]} Matrices listed as separate parameters or in an array\n * @returns {Matrix} Affine Matrix\n */\nexport function transform(...matrices: any): any {\n  matrices = Array.isArray(matrices[0]) ? matrices[0] : matrices;\n\n  const multiply = (m1: any, m2: any) => ({\n    a: m1.a * m2.a + m1.c * m2.b,\n    c: m1.a * m2.c + m1.c * m2.d,\n    e: m1.a * m2.e + m1.c * m2.f + m1.e,\n    b: m1.b * m2.a + m1.d * m2.b,\n    d: m1.b * m2.c + m1.d * m2.d,\n    f: m1.b * m2.e + m1.d * m2.f + m1.f,\n  });\n\n  switch (matrices.length) {\n    case 0:\n      throw new Error('no matrices provided');\n\n    case 1:\n      return matrices[0];\n\n    case 2:\n      return multiply(matrices[0], matrices[1]);\n\n    default: {\n      const [m1, m2, ...rest] = matrices;\n      const m = multiply(m1, m2);\n      return transform(m, ...rest);\n    }\n  }\n}\n\n/**\n * Merge multiple Matrix into one\n * @param Matrix {...Matrix | Matrix[]} Matrix listed as separate parameters or in an array\n * @returns {Matrix} Affine Matrix\n */\nexport function compose(...Matrix: any) {\n  return transform(...Matrix);\n}\n","import { isUndefined } from './utils';\nimport { translate } from './translate';\nimport { transform } from './transform';\n\nconst { cos, sin, PI } = Math;\n/**\n * Calculate a rotation matrix\n * @param angle {number} Angle in radians\n * @param [cx] {number} If (cx,cy) are supplied the rotate is about this point\n * @param [cy] {number} If (cx,cy) are supplied the rotate is about this point\n * @returns {Matrix} Affine Matrix\n */\nexport function rotate(angle: number, cx: number, cy: number) {\n  const cosAngle = cos(angle);\n  const sinAngle = sin(angle);\n  const rotationMatrix = {\n    a: cosAngle,\n    c: -sinAngle,\n    e: 0,\n    b: sinAngle,\n    d: cosAngle,\n    f: 0,\n  };\n  if (isUndefined(cx) || isUndefined(cy)) {\n    return rotationMatrix;\n  }\n\n  return transform([\n    translate(cx, cy),\n    rotationMatrix,\n    translate(-cx, -cy),\n  ]);\n}\n\n/**\n * Calculate a rotation matrix with a DEG angle\n * @param angle {number} Angle in degree\n * @param [cx] {number} If (cx,cy) are supplied the rotate is about this point\n * @param [cy] {number} If (cx,cy) are supplied the rotate is about this point\n * @returns {Matrix} Affine Matrix\n */\nexport function rotateDEG(angle: number, cx: any = undefined, cy: any = undefined) {\n  return rotate((angle * PI) / 180, cx, cy);\n}\n","import { isUndefined } from './utils';\nimport { translate } from './translate';\nimport { transform } from './transform';\n\n/**\n * Calculate a scaling matrix\n * @param sx {number} Scaling on axis x\n * @param [sy = sx] {number} Scaling on axis y (default sx)\n * @param [cx] {number} If (cx,cy) are supplied the scaling is about this point\n * @param [cy] {number} If (cx,cy) are supplied the scaling is about this point\n * @returns {Matrix} Affine Matrix\n */\nexport function scale(sx: any, sy: any = undefined, cx: any = undefined, cy: any = undefined) {\n  if (isUndefined(sy)) sy = sx;\n\n  const scaleMatrix = {\n    a: sx,\n    c: 0,\n    e: 0,\n    b: 0,\n    d: sy,\n    f: 0,\n  };\n\n  if (isUndefined(cx) || isUndefined(cy)) {\n    return scaleMatrix;\n  }\n\n  return transform([\n    translate(cx, cy),\n    scaleMatrix,\n    translate(-cx, -cy),\n  ]);\n}\n","const { tan } = Math;\n\n/**\n * Calculate a skew matrix\n * @param ax {number} Skew on axis x\n * @param ay {number} Skew on axis y\n * @returns {Matrix} Affine Matrix\n */\nexport function skew(ax: any, ay: any) {\n  return {\n    a: 1,\n    c: tan(ax),\n    e: 0,\n    b: tan(ay),\n    d: 1,\n    f: 0,\n  };\n}\n\n/**\n * Calculate a skew matrix using DEG angles\n * @param ax {number} Skew on axis x\n * @param ay {number} Skew on axis y\n * @returns {Matrix} Affine Matrix\n */\nexport function skewDEG(ax: any, ay: any) {\n  return skew(ax * (Math.PI / 180), ay * (Math.PI / 180));\n}\n","import Node, { NodeProperties } from '../node/node';\n\nimport { Vec2 } from '../types';\nimport {\n  inverse,\n  applyToPoints,\n} from '../matrix';\n\ntype StageProperties = {\n  canvas?: HTMLCanvasElement,\n  height?: number,\n  width?: number,\n} & NodeProperties;\n\nclass Stage extends Node {\n  static devicePixelRatio = window.devicePixelRatio;\n\n  public canvas!: HTMLCanvasElement;\n\n  public ctx: CanvasRenderingContext2D;\n\n  public width = 400;\n\n  public height = 400;\n\n  constructor(params?: StageProperties) {\n    super(params);\n    const defaultParam = {\n      canvas: document.createElement('canvas'),\n      wrapper: document.createElement('div'),\n      ...params,\n    };\n\n    for (const i in defaultParam) {\n      this[i] = defaultParam[i];\n    }\n    this.ctx = this.canvas.getContext('2d') as CanvasRenderingContext2D;\n    this.ctx.font = '20px sans-serif';\n    this.canvas.style.width = '100%';\n    this.canvas.style.height = '100%';\n    this.canvas.setAttribute('contenteditable', 'contenteditable');\n  }\n\n  setSize(size: Vec2) {\n    [this.width, this.height] = size;\n    [this.canvas.width, this.canvas.height] = size;\n  }\n\n  screenCoordToLogicPoint(clientPoint: Vec2, matrix?: any): Vec2 {\n    if (matrix) {\n      clientPoint = applyToPoints(\n        inverse(matrix),\n        [\n          clientPoint[0] * Stage.devicePixelRatio,\n          clientPoint[1] * Stage.devicePixelRatio,\n        ],\n      ) as [number, number];\n      return clientPoint;\n    }\n    console.error('缺少matrix');\n  }\n}\nexport default Stage;\n","/**\n * Calculate a matrix that is the inverse of the provided matrix\n * @param matrix {Matrix} Affine Matrix\n * @returns {Matrix} Inverted Affine Matrix\n */\nexport function inverse(matrix: any) {\n  const { a, b, c, d, e, f } = matrix;\n\n  const denom = a * d - b * c;\n\n  return {\n    a: d / denom,\n    b: b / -denom,\n    c: c / -denom,\n    d: a / denom,\n    e: (d * e - c * f) / -denom,\n    f: (b * e - a * f) / denom,\n  };\n}\n","import Node from '../node/node';\nimport {\n  applyToPoints,\n  rotate,\n  scale,\n  skew,\n  translate,\n  compose,\n} from '../matrix';\nimport { Vec2 } from '../types';\n\nconst calculateNodeMatrix = (node: Node) => compose(\n  translate(\n    node.x + node.translate[0],\n    node.y + node.translate[1],\n  ),\n  scale(\n    node.scale,\n    node.scale,\n    node.origin[0] * node.width, // calculate reference point coordinates.\n    node.origin[1] * node.height,\n  ),\n  skew(\n    node.skew[0],\n    node.skew[1],\n  ),\n  rotate(\n    (Math.PI / 180) * node.rotate,\n    node.origin[0] * node.width, // calculate reference point coordinates.\n    node.origin[1] * node.height,\n  ),\n);\n\nexport const layoutNode = (node: Node) => {\n  const layoutCurrentNode = (currentNode: Node, curparent?: Node, mixMatrix?: any) => {\n    // who is parent?\n    let parent = curparent || node;\n\n    // before layout hook\n    if (currentNode.beforeLayout) currentNode.beforeLayout();\n\n    // single node\n    if (parent !== currentNode && calculatePosition[currentNode.layout]) {\n      currentNode.setPostion(calculatePosition[currentNode.layout](parent, currentNode));\n    }\n\n    // convert self attributes to matrix\n    const matrix = calculateNodeMatrix(currentNode);\n\n    // inherit matrix from father\n    mixMatrix = mixMatrix ? compose(mixMatrix, matrix) : matrix;\n\n    // final matrix\n    currentNode.matrix = mixMatrix;\n\n    // caculate draw pooints\n    currentNode.drawPoints = applyToPoints(\n      mixMatrix,\n      currentNode.points.map((num, index) => {\n        if (index % 2 === 0) {\n          return num * currentNode.width;\n        }\n        return num * currentNode.height;\n      }),\n    );\n\n    //  after layout hook\n    if (currentNode.afterLayout) currentNode.afterLayout();\n\n    // layout tree recursion\n    if (currentNode.children.length > 0) {\n      parent = currentNode;\n      currentNode.children.forEach((node) => {\n        layoutCurrentNode(node, parent, mixMatrix);\n      });\n    }\n  };\n\n  // execute layout node tree\n  layoutCurrentNode(node);\n};\n\nexport const calculatePosition = {\n  leftTop: (parent: Node, self: Node): Vec2 => [-self.origin[0] * self.width, -self.origin[1] * self.height],\n  rightTop: (parent: Node, self: Node): Vec2 => [parent.width - self.origin[0] * self.width, -self.origin[1] * self.height],\n  rightBottom: (parent: Node, self: Node): Vec2 =>\n    [parent.width - self.origin[0] * self.width, parent.height - self.origin[1] * self.height],\n  leftBottom: (parent: Node, self: Node): Vec2 => [-self.origin[0] * self.width, parent.height - self.origin[1] * self.height],\n  center: (parent: Node, self: Node): Vec2 =>\n    [parent.width / 2 - self.origin[0] * self.width, parent.height / 2 - self.origin[1] * self.height],\n  leftCenter: (parent: Node, self: Node): Vec2 => [-self.origin[0] * self.width, parent.height / 2 - self.origin[1] * self.height],\n  rightCenter: (parent: Node, self: Node): Vec2 =>\n    [parent.width - self.origin[0] * self.width, parent.height / 2 - self.origin[1] * self.height],\n};\n","import { loadImage } from '../common/util';\nimport Node, { NodeProperties } from './node';\nimport {\n  getTwoPointsDistance,\n  caculateRotateAngle,\n} from './util';\n\ninterface ImageProperties extends NodeProperties {\n  src?: string,\n  repeat?: boolean,\n}\n\nclass ImageSprite extends Node {\n  public src = '';\n\n  public img = new Image();\n\n  public repeat = false;\n\n  public flip = false;\n\n  public type = 'image';\n\n  public name = 'imageName';\n\n  constructor(params?: ImageProperties) {\n    super(params);\n    for (const i in params) {\n      this[i] = params[i];\n    }\n    this.img.crossOrigin = 'anonymous';\n    this.init();\n  }\n\n  updateSrc(src: string | HTMLImageElement, callback?: Function): HTMLImageElement {\n    if (src instanceof Image) {\n      const [width, height] = this.getSize();\n      this.img = src;\n      this.setSize([width, height]);\n      this.trigger('onload');\n      return src;\n    }\n    const img = loadImage(src, (img: HTMLImageElement) => {\n      if (img === null) {\n        return;\n      }\n      this.img = img;\n      const [width, height] = this.getSize();\n      if (!width && !height) {\n        this.setSize([img.width, img.height]);\n      }\n      this.trigger('onload');\n      if (callback) {\n        callback();\n      }\n    });\n    return img;\n  }\n\n  init() {\n    if (!this.src) {\n      return;\n    }\n    loadImage(this.src, (img: HTMLImageElement) => {\n      if (img === null) {\n        return;\n      }\n      this.img = img;\n      const [width, height] = this.getSize();\n      if (!width && !height) {\n        this.setSize([img.width, img.height]);\n      }\n      this.trigger('onload');\n    });\n  }\n\n  draw(ctx: CanvasRenderingContext2D) {\n    if (!this.img) {\n      return;\n    }\n    const drawImage = () => {\n      const width = getTwoPointsDistance(\n        this.drawPoints[0],\n        this.drawPoints[1],\n        this.drawPoints[2],\n        this.drawPoints[3],\n      );\n      const height = getTwoPointsDistance(\n        this.drawPoints[2],\n        this.drawPoints[3],\n        this.drawPoints[4],\n        this.drawPoints[5],\n      );\n      ctx.save();\n      ctx.globalAlpha = this.opacity;\n      // 组合旋转\n      if (!this.flip) {\n        ctx.translate(\n          this.drawPoints[0],\n          this.drawPoints[1],\n        );\n      }\n      if (this.flip) {\n        ctx.translate(\n          this.drawPoints[0] + width,\n          this.drawPoints[1],\n        );\n        ctx.scale(-1, 1);\n      }\n      ctx.rotate(caculateRotateAngle(this.drawPoints));\n      if (this.skew[0] || this.skew[1]) {\n        ctx.transform(1, this.skew[0], this.skew[1], 1, 0, 0);\n      }\n      // 绘制\n      if (this.repeat) {\n        // pattern绘制\n        const pattern = ctx.createPattern(this.img, 'repeat');\n        if (!pattern) return;\n        ctx.fillStyle = pattern;\n        ctx.fillRect(\n          0,\n          0,\n          width,\n          height,\n        );\n      } else {\n        ctx.drawImage(\n          this.img,\n          0,\n          0,\n          width,\n          height,\n        );\n      }\n      ctx.restore();\n    };\n    drawImage();\n  }\n}\nexport { ImageProperties };\nexport default ImageSprite;\n","import Stage from '../stage/stage';\nimport Node from '../node/node';\nimport { Vec2 } from '../types';\nimport { getTwoPointsVector } from '../node/util';\nimport { Render } from '../render';\nimport {\n  rotate,\n  scale,\n  skew,\n  translate,\n  compose,\n} from '../matrix';\nimport EventAgent from '../event/eventAgent';\nimport { KeyCodeMap } from './keycodeMap';\nimport { getClientPoint, selectNodeByPoint } from './util';\nimport dragNode from './dragNode';\n\nconst debuggerNode = document.createElement('div');\ndebuggerNode.style.cssText = `\n  left:10px;\n  top:10px;\n  color:white;\n  background:rgba(255,255,255,.4);\n  position: absolute;\n`;\ndocument.body.appendChild(debuggerNode);\n\ntype HandEvent = 'touchstart' | 'touchmove' | 'touchend' | 'mousedown' | 'mousemove' | 'mouseup';\nconst deviceAdapter = {\n  Mobile: {\n    tapstart: 'touchstart',\n    tapmove: 'touchmove',\n    tapend: 'touchend',\n    getPosition(event: TouchEvent): Vec2 {\n      return [event.touches[0].clientX, event.touches[0].clientY] as Vec2;\n    },\n  },\n  PC: {\n    tapstart: 'mousedown',\n    tapmove: 'mousemove',\n    tapend: 'mouseup',\n    getPosition(event: MouseEvent): Vec2 {\n      return [event.clientX, event.clientY] as Vec2;\n    },\n  },\n};\nconst isMobile = () => /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\nconst platform = isMobile() ? 'Mobile' : 'PC';\nlet lockOrigin = false;\nlet spacePressed = false;\n\n// 节点添加交互能力，如drage,click,mousedown\n\ninterface InteractiveProperties {\n  stage: Stage,\n  render: Render,\n  node: Node,\n}\nclass Interactive extends EventAgent {\n  public selectedNode: Node;\n\n  public stage: Stage;\n\n  public node: Node;\n\n  public render: Render;\n\n  public beforeClientPoint: Vec2; // from mouse event coordinates point\n\n  public clientPoint: Vec2; // from mouse event coordinates point\n\n  public canvasPoint: Vec2; // real canvas pixels point\n\n  public logicPoint: Vec2; // logic prixels point\n\n  public isMouseDown: Boolean;\n\n  public mouseMoveVec2: Vec2 = [0, 0];\n\n  private latestClientPoint: Vec2;\n\n  private latestLogicPoint: Vec2;\n\n  constructor(params?: InteractiveProperties) {\n    super();\n    for (const i in params) {\n      this[i] = params[i];\n    }\n    this.selectedNode = this.node; // 默认选择根元素\n    this.addTouchOrMouseEventListener();\n    this.addShortcutEventListener();\n    this.addMousewheelListener();\n  }\n\n  // touchOrMouseEventStart funciton\n  touchOrMouseEvent(event: MouseEvent | TouchEvent) {\n    const { type } = event; // mousemove\n    const clientPoint = deviceAdapter[platform].getPosition(event as any);\n    this.latestClientPoint = getClientPoint(this.stage.canvas, clientPoint);\n    this.latestLogicPoint = this.stage.screenCoordToLogicPoint(this.latestClientPoint, this.selectedNode.matrix);\n    if (this.clientPoint) {\n      this.mouseMoveVec2 = getTwoPointsVector(\n        this.stage.screenCoordToLogicPoint(this.clientPoint, this.selectedNode.matrix),\n        this.stage.screenCoordToLogicPoint(this.latestClientPoint, this.selectedNode.matrix),\n      );\n    }\n    this.clientPoint = this.latestClientPoint;\n    this.logicPoint = this.latestLogicPoint;\n    this.canvasPoint = clientPoint.map((item) => item * Stage.devicePixelRatio) as Vec2;\n\n    if (type === deviceAdapter[platform].tapstart) {\n      this.isMouseDown = true;\n      if (spacePressed) {\n        this.selectedNode = this.node;\n      } else {\n        this.selectedNode = selectNodeByPoint(this.node, this.canvasPoint);\n      }\n      this.trigger('tapstart');\n    }\n    if (type === deviceAdapter[platform].tapmove) {\n      this.trigger('tapmove');\n    }\n    if (type === deviceAdapter[platform].tapend) {\n      this.isMouseDown = false;\n      this.trigger('tapend');\n    }\n    this.render.drawFrame();\n  }\n\n  // show Debugger When Move\n  public showDebuggerWhenMove() {\n    if (this.node.matrix) {\n      // const logicPoint = this.stage.screenCoordToLogicPoint(clientPoint, this.node.matrix);\n      // 如何计算origin\n      debuggerNode.innerHTML = `坐标:( ${this.logicPoint.map((num) => Math.round(num)).join(',')} ); Node:${this.selectedNode.name}`;\n      debuggerNode.style.transform = `translate3D(${this.clientPoint[0]}px, ${this.clientPoint[1]}px,0)`;\n    }\n    lockOrigin = false;\n  }\n\n  // handle tapstart or mousedown event\n  private addTouchOrMouseEventListener() {\n    const touchOrMouseEvent = this.touchOrMouseEvent.bind(this);\n    this.stage.canvas.addEventListener(deviceAdapter[platform].tapstart as HandEvent, touchOrMouseEvent);\n    this.stage.canvas.addEventListener(deviceAdapter[platform].tapmove as HandEvent, touchOrMouseEvent);\n    this.stage.canvas.addEventListener(deviceAdapter[platform].tapend, touchOrMouseEvent);\n  }\n\n  // handle onmousewheel event\n  private addMousewheelListener() {\n    // 滚轮\n    document.body.onmousewheel = (event) => {\n      if (this.clientPoint && lockOrigin === false) {\n        const currentMouseCanvasPoint = this.stage.screenCoordToLogicPoint(this.clientPoint, this.node.matrix);\n        const RX = currentMouseCanvasPoint[0] / this.node.width;\n        const RY = currentMouseCanvasPoint[1] / this.node.height;\n        const newMtx = compose(\n          translate(\n            this.node.x + this.node.translate[0],\n            this.node.y + this.node.translate[1],\n          ),\n          scale(\n            this.node.scale,\n            this.node.scale,\n            RX * this.node.width,\n            RY * this.node.height,\n          ),\n          skew(\n            this.node.skew[0],\n            this.node.skew[1],\n          ),\n          rotate(\n            (Math.PI / 180) * this.node.rotate,\n            this.node.origin[0] * this.node.width,\n            this.node.origin[1] * this.node.height,\n          ),\n        );\n        this.node.origin = [RX, RY];\n        this.node.setPostion([\n          this.node.x - (newMtx.e - this.node.matrix.e),\n          this.node.y - (newMtx.f - this.node.matrix.f),\n        ]);\n        lockOrigin = true;\n      }\n      if (lockOrigin) {\n        this.node.scale += event.deltaY / 8000;\n        this.node.scale = Math.max(Math.min(this.node.scale, 100), 0.01);\n        this.render.drawFrame();\n      }\n    };\n  }\n\n  // handle keyboard shortcut event\n  private addShortcutEventListener() {\n    document.addEventListener('keydown', (event) => {\n      if (event.keyCode === KeyCodeMap.Space) {\n        spacePressed = true;\n      }\n      if (event.keyCode === KeyCodeMap.Equal) {\n        this.selectedNode.opacity = Math.min(this.selectedNode.opacity + 0.1, 1);\n      }\n      if (event.keyCode === KeyCodeMap.Minus) {\n        this.selectedNode.opacity = Math.max(this.selectedNode.opacity - 0.1, 0);\n      }\n      this.render.drawFrame();\n    });\n    document.addEventListener('keyup', (event) => {\n      if (event.keyCode === KeyCodeMap.Space) {\n        spacePressed = false;\n      }\n    });\n  }\n}\nexport { Interactive, dragNode };\n","import { Stage, Render } from '../core';\nimport Node, { NodeProperties } from '../core/node/node';\n\nimport { Coordinate } from './index';\n\ninterface RootNodeProperties extends NodeProperties {\n  stage: Stage,\n  render: Render,\n}\nclass RootNode extends Node {\n  public stage: Stage;\n\n  public render: Render;\n\n  constructor(params?: RootNodeProperties) {\n    super();\n    this.name = 'rootNode';\n    this.enableDrag = true;\n    this.stage = params.stage;\n    this.render = params.render;\n    this.setSize([...this.stage.getSize()]);\n\n    this.fillStyle = [0, 0, 0, 0.1];\n    this.strokeStyle = [255, 255, 255, 0.08];\n    this.lineWidth = 1;\n    const coordinate = new Coordinate();\n    this.appendNode(coordinate);\n    // resieze\n    window.onresize = () => {\n      const { clientWidth, clientHeight } = this.stage.canvas;\n      this.stage.setSize([\n        clientWidth * Stage.devicePixelRatio,\n        clientHeight * Stage.devicePixelRatio,\n      ]);\n      this.setSize([...this.stage.getSize()]);\n      this.render.drawFrame();\n    };\n    this.render.drawFrame();\n  }\n}\nexport default RootNode;\n","import Node, { NodeProperties } from '../core/node/node';\nimport { colorToString } from '../core/common/util';\nimport { Color } from '../core/types';\n\ninterface CoordinateProperties extends NodeProperties {\n  step?: number,\n}\nclass Coordinate extends Node {\n  public step = 100;\n\n  public fontColor: Color = [255, 255, 255, 0.3];\n\n  public lineColor: Color = [255, 255, 255, 0.1];\n\n  public pointYNums = 0;\n\n  // public syncNode: Node;\n\n  constructor(params?: CoordinateProperties) {\n    super(params);\n    const defaultParams: CoordinateProperties = {\n      name: 'coordinate',\n      type: 'other',\n      points: [0, 0, 0.4, 0.6, 1, 1],\n      enableClick: false,\n      ...params,\n    };\n    for (const i in defaultParams) {\n      this[i] = defaultParams[i];\n    }\n  }\n\n  beforeLayout() {\n    this.setSize((this.parent as Node).getSize());\n    // 防止尺寸变更\n    let points: number[] = [];\n    const [width, height] = this.getSize();\n    const [parentWidth] = (this.parent as Node).getSize();\n    const stepScale = Math.max(Math.round(1 / this.parent.scale), 1);\n    this.step = 100 * stepScale;\n    const { step } = this;\n    // 横向列\n    for (let y = 0; y <= step; y += step) {\n      points = points.concat([\n        0, y / height,\n        1, y / height,\n      ]);\n    }\n    this.pointYNums = points.length;\n    // 纵向列\n    for (let x = 0; x <= step; x += step) {\n      points = points.concat([\n        x / width, 0,\n        x / parentWidth, 1,\n      ]);\n    }\n    this.points = points;\n  }\n\n  draw(ctx: CanvasRenderingContext2D) {\n    ctx.strokeStyle = colorToString(this.lineColor);\n    ctx.lineWidth = 1;\n    ctx.lineCap = 'round';\n\n    const step = this.drawPoints[5] - this.drawPoints[1];\n    const verticalLineNums = Math.ceil(this.parent.parent.width / step);\n    const horizontalLineNums = Math.ceil(this.parent.parent.height / step);\n    const horizontalRemainder = this.drawPoints[1] % step; // 余数\n    const horizontalYSteps = Math.floor(this.drawPoints[1] / step); // 视窗左上角的竖向step数\n    const verticalRemainder = this.drawPoints[0] % step; // 余数\n    const verticalXSteps = Math.floor(this.drawPoints[0] / step); // 视窗左上角的横向step数\n\n    // 水平线\n    for (let y = 0; y < horizontalLineNums; y += 1) {\n      ctx.beginPath();\n      ctx.moveTo(0, step * y + horizontalRemainder);\n      ctx.lineTo(this.parent.parent.width, step * y + horizontalRemainder);\n      // ctx.lineTo(32, step * y + horizontalRemainder);\n      ctx.closePath();\n      ctx.stroke();\n    }\n    // 垂直线\n    for (let x = 0; x < verticalLineNums; x += 1) {\n      ctx.beginPath();\n      ctx.moveTo(step * x + verticalRemainder, 0);\n      ctx.lineTo(step * x + verticalRemainder, this.parent.parent.height);\n      // ctx.lineTo(step * x + verticalRemainder, 32);\n      ctx.closePath();\n      ctx.stroke();\n    }\n\n    ctx.save();\n    ctx.font = '20px sans-serif';\n    ctx.fillStyle = colorToString(this.fontColor);\n    ctx.textAlign = 'left';\n\n    // 水平标号\n    for (let y = 0; y <= horizontalLineNums; y += 1) {\n      ctx.fillText(\n        (this.step * (y - horizontalYSteps)).toString(),\n        4,\n        20 + step * y + horizontalRemainder,\n      );\n    }\n    // 垂直标号\n    for (let x = 0; x <= verticalLineNums; x += 1) {\n      ctx.fillText(\n        (this.step * (x - verticalXSteps)).toString(),\n        4 + step * x + verticalRemainder,\n        20,\n      );\n    }\n    ctx.restore();\n  }\n}\nexport default Coordinate;\n","import { Node, NodeProperties, Stage } from '../core';\n\ntype IframeParams = {\n  src?: string,\n} & NodeProperties;\n\nclass Iframe extends Node {\n  public src: string;\n\n  public iframeWin: HTMLElement;\n\n  constructor(params?: IframeParams) {\n    super(params);\n    this.src = params.src;\n    this.enableDrag = true;\n    this.init();\n  }\n\n  init() {\n    const { body } = document;\n    this.iframeWin = document.createElement('iframe');\n    this.iframeWin.setAttribute('src', this.src);\n    this.iframeWin.style.cssText = `\n      position:fixed;\n      left:0;\n      top:0;\n      border:0;\n      transform-origin:left top;\n      opacity:1\n    `;\n    this.iframeWin.style.pointerEvents = 'none';\n    this.iframeWin.style.width = `${this.width / Stage.devicePixelRatio}px`;\n    this.iframeWin.style.height = `${this.height / Stage.devicePixelRatio}px`;\n    this.iframeWin.setAttribute('scrolling', 'no');\n    body.appendChild(this.iframeWin);\n\n    document.body.addEventListener('mousedown', () => {\n      this.iframeWin.style.pointerEvents = 'none';\n    });\n    document.body.addEventListener('dblclick', () => {\n      this.iframeWin.style.pointerEvents = 'inherit';\n    });\n  }\n\n  afterLayout(): void {\n    this.iframeWin.style.transform = `\n      translate3D(\n        ${this.drawPoints[0] / Stage.devicePixelRatio}px, \n        ${this.drawPoints[1] / Stage.devicePixelRatio}px,\n        0\n      )\n      scale(${this.matrix.a}, ${this.matrix.a})\n    `;\n    this.iframeWin.style.opacity = this.opacity.toString();\n  }\n}\nexport default Iframe;\n","import { Node, ImageSprite } from '../core';\n\nclass SimpleControl extends Node {\n  private flipBtn!: ImageSprite;\n\n  private deleteBtn: ImageSprite;\n\n  constructor() {\n    super();\n    this.backgroundColor = [30, 200, 200, 0.1];\n    this.lineWidth = 4;\n    this.strokeStyle = [255, 255, 255, 1];\n    this.deleteBtn = new ImageSprite();\n    this.initFlipBtn();\n    this.initDeleteBtn();\n    this.enableClick = false;\n  }\n\n  bindParent(parentNode: Node) {\n    if (this.parent && this.parent !== parentNode) {\n      this.unBindParent();\n    }\n    this.parent = parentNode;\n    this.setSize(parentNode.getSize());\n    this.parent.appendNode(this);\n    // 和业务相关\n    if (this.parent.extra.autoFlip) {\n      this.flipBtn.visible = false;\n      this.flipBtn.enableClick = false;\n    } else {\n      this.flipBtn.visible = true;\n      this.flipBtn.enableClick = true;\n    }\n    // 和业务相关\n  }\n\n  unBindParent() {\n    if (this.parent) {\n      this.parent.removeNode(this);\n    }\n  }\n\n  initFlipBtn() {\n    // eslint-disable-next-line max-len\n    this.flipBtn = new ImageSprite({ src: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFoAAABaCAMAAAAPdrEwAAAAdVBMVEUAAAD///////////////////////////////////////////////////////////////////////////8AAABfX1/f39+/v78gICCAgIBwcHBAQEDv7++QkJCvr68QEBDPz89QUFCgoKB/f39PT08wMDBvb29DwE22AAAAE3RSTlMA798gkL+AQDAQcGCgz1CvzrCe0xQd8gAAAtdJREFUWMO1meuSmzAMRrG5hASSbCuDIVxC0m7f/xGbbJPRbGNJDpjznzOaD9kyJvIhL5JyrxXcUDo9Zoc8CsEmSxW8kiabhd5EAYkuZ9u3mQIBXcTBxUgZBxcjyVvyHSGmYvEWxym8SRqHLhlRO5+UE5hFIoexh5noWDBrgHXcOWeW3TljVrAIlYdPAzMRzOHdGgKw3zrMRD8H6O8dBGL3ErQKpVb/x51CMNLv5gJk6hu+kfj3nR0ujfni3LVWjGTr3x2V+UZTCdVnaI6BZTQvdLVn2SWvHowDtvIMi+axxkUzymXL7XEyTlq5bA0S16oapnsCk207H7d6nL7gPWpsmBNQbIiXKMvFupPZm6ltHm7LJbKBOdTP1dkziSTEOvF0V0yPpO4nTeXptvT+R7Qb1iOspI4MOwcnjZHdJ7bsPDqAiwlzpOnPXHMXUUbuSLK7/dckVGcfwcVv4+PuuURKokE+jZe7YxLZE2vRGC93y/SIjpS7q33c/VSZOw3RfUCoeXc93gfxE3DCqNEtzYZ6lpp4T9VsNeAEvLSj68nKQ62odX6jsj1QVJJaRZpZMq3nuYdovj2z83Tg5f4kdtWS2zB7L/cFXPyghswZExHdAzFmCm4vPvc+7glcHKhRYLGjJXdDjYJIcZuasbL7Ck5w7BJlN7Xorsmxm7E5yu6RPj5tuMknu9lDnxKO1Y2dYdb8h8wv8gtAphQOwSfmw0jOAxMh6n7StXb6GlpD9efqlwf2COsmZgNF8VBvFdNajdNtBXUcYdncF4CDQXyJWDYn717Vo1i0UDZW3hhixlMrUSwbsW13fg7iQUhax+QdztJri2LNq5b1L4jCX2utfxmHbPchzHr1i8/1r2vDXzKvfzUe/kI/vPuDMC/v72S72i+f1X9UyRQ6dMlInPiLM0zZU16GF6O80MHFyKbUjHf5T+nUpU0z9C4hP2TH9PmL/uNnUuSRB38BJ4/actlilNIAAAAASUVORK5CYII=' });\n    this.flipBtn.zIndex = 10000;\n    this.flipBtn.name = 'flipBtn';\n    this.flipBtn.setSize([58, 58]);\n    this.origin = [0.5, 0.5];\n    this.flipBtn.layout = 'leftBottom';\n    this.appendNode(this.flipBtn);\n    this.flipBtn.enableDrag = false;\n    this.flipBtn.register('tapstart', () => {\n      this.trigger('flip', this.parent);\n    });\n  }\n\n  initDeleteBtn() {\n    // eslint-disable-next-line max-len\n    this.deleteBtn = new ImageSprite({ src: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFsAAABaCAMAAADgtNoOAAAAV1BMVEUAAAD///////////////////////////////////////////////////////////////////////8AAABgYGBfX1/f39/Pz8+goKCAgIBQUFBAQEAQEBBXaUEUAAAAEnRSTlMA798gv4CQQBAwoHBgz4+vX1BxguXuAAACR0lEQVRo3sXZ2Y7CMAwF0GZpoBsMbsr+/985vKCrUdI6ZhxxX5GOLNckbdKUpBtDP1lDrxjrj+2pa1Sya72hND7s/gsHuEls/zm/bwGv8T9OX0Z6py8jB5k+FMnoTLnsPAnjnXrRiBmKOn2gj3LgaTfRh7GOoy1RJbxjaAbvtmhD/4rp+IbotwW0Pm5JIdM+RydzrTfnIyllSJtttGyTtNyTWrx+R5BBffwQ82dWWlJN2yCOEO3Ce1JOW6VsFI4hqVW41bfN+8WM1nOJjytlc7vHM61nxz7J83Oe50iZxNcPzwutJrAtWeY5j0f8kI9hW3KfYaT0/OCaEmg9txl4Ss9XblI8bWQBntILuxoSyXDQ7N+nIwHO00jXNCcS4AKaRiyvBXghjQk/kgAX0NRjTIpwAU1T0UIFXECTbRpDYnwpXQqJJDhoPrBZHLS6Hd921LZBA+dtI6SB88/SCmng/AxOAnpZBLjHbllCEwnwI7adIroIx1o1CmgRfsLeUECX4tiMjYCW4NiLeVqIe+69/go6h99oPYF793mAzuF3pt2bDY+gc3jc/FcyL1aXJ+gUf543d0uuKeflvtLU6yNemJagKaqx+AJUz8/b3usX7ip8uuJJVivc1fvmDpBFhcsPrQbVIal6NlP/TEm/K7nT6qA+I8h+0qDtJ2emXz+QBV3/jFr/bF3Ulq9fOEwJrTbnYV/v7uj7d16vjFa9aMSFcrlFp0v1voIMfbT6MrLr7QascNXtc65vX7BGulN79O+7/6kPY9nd/y9vIL4Rt3sqFQAAAABJRU5ErkJggg==' });\n    this.deleteBtn.name = 'deleteBtn';\n    this.deleteBtn.zIndex = 10000;\n    this.deleteBtn.setSize([58, 58]);\n    this.deleteBtn.zIndex = 1000;\n    this.origin = [0.5, 0.5];\n    this.deleteBtn.layout = 'rightTop';\n    this.deleteBtn.enableDrag = false;\n    this.appendNode(this.deleteBtn);\n    this.deleteBtn.register('tapstart', () => {\n      this.trigger('delete', this.parent);\n    });\n  }\n}\nexport default new SimpleControl();\n","import { EventAgent, Render, Stage, Node } from '../core';\n\nexport interface FuncProperties {\n  name?: string;\n  stage?: Stage;\n  render?: Render;\n  rootNode?: Node;\n}\n\nexport class Func extends EventAgent {\n  public name = 'func';\n\n  public stage: Stage = null;\n\n  public render: Render = null;\n\n  public rootNode: Node = null;\n\n  constructor(params?: FuncProperties) {\n    super();\n    for (const i in params) {\n      this[i] = params[i];\n    }\n  }\n}\n","// import { Rule } from '../components';\nimport { ImageSprite, calculatePosition } from '../core';\n// import { nodeControl } from '../components';\nimport { Func, FuncProperties } from './func';\nimport potpack from './lib/potpack';\n\ntype PasteImagesParams = {\n  newkey?: string,\n} & FuncProperties;\n\nclass PasteImages extends Func {\n  public newkey: string;\n\n  constructor(params?: PasteImagesParams) {\n    super(params);\n    this.newkey = params?.newkey;\n  }\n\n  init() {\n    // 拖拽获取图片\n    this.handleDragImages();\n    // 粘贴图片\n    this.handlerPasteImages();\n  }\n\n  handleDragImages() {\n    this.stage.canvas.addEventListener('dragenter', (e) => {\n      e.stopPropagation();\n      e.preventDefault();\n    }, false);\n    this.stage.canvas.addEventListener('dragover', (e) => {\n      e.stopPropagation();\n      e.preventDefault();\n    }, false);\n    this.stage.canvas.addEventListener('drop', (e) => {\n      // if (e.dataTransfer && e.dataTransfer.items[0].type.indexOf('text/uri-list') > -1) {\n      //   return;\n      // }\n      const { files } = e.dataTransfer;\n      this.handleFiles(files);\n      e.stopPropagation();\n      e.preventDefault();\n    }, false);\n  }\n\n  handlerPasteImages() {\n    window.addEventListener('paste', (e) => {\n      // 判断是否是粘贴图片\n      if (e.clipboardData && e.clipboardData.items[0].type.indexOf('image') > -1) {\n        // const file = e.clipboardData.items[0].getAsFile();\n        const { files } = e.clipboardData;\n        this.handleFiles(files);\n      } else if (e.clipboardData && e.clipboardData.items[0].type.indexOf('text/plain') > -1) {\n\n      } else {\n\n      }\n    }, false);\n  }\n\n  handleFiles(files) {\n    // 获取图片\n    const reader = new FileReader();\n    const readerFiles = (count) => {\n      if (count === files.length) {\n        return false;\n      }\n      const file = files[count];\n      reader.onload = ((theFile) => {\n        const imgData = theFile.srcElement.result;\n        this.receiveImg(imgData);\n        readerFiles(++count);\n      });\n      reader.readAsDataURL(file);\n    };\n    readerFiles(0);\n  }\n\n  receiveImg(imagedata: string) {\n    const image = new ImageSprite({ enableDrag: true });\n    // image.register('tapstart', () => {\n    //   nodeControl.bindParent(image);\n    // });\n    this.rootNode.appendNode(image);\n    image.register('onload', () => {\n      image.setPostion(calculatePosition.center(image.parent, image));\n      // const myRule = new Rule();\n      // image.appendNode(myRule);\n      const images = this.rootNode.children.filter((item) => item.type === 'image');\n      // pack\n      potpack(images);\n      this.render.drawFrame();\n    });\n    image.updateSrc(imagedata);\n  }\n}\nexport default PasteImages;\n","import '../sass/index.scss';\nimport {\n  Stage,\n  Render,\n  Interactive,\n  dragNode,\n} from './core';\nimport { Iframe, RootNode } from './components';\nimport { PasteImages } from './functions';\n\n// wrap\nconst wrapper = document.getElementById('stageWrap');\nconst { clientWidth, clientHeight } = wrapper;\n\n// stage\nconst stage = new Stage({ backgroundColor: [0, 0, 3, 1] });\nstage.setSize([\n  clientWidth * Stage.devicePixelRatio,\n  clientHeight * Stage.devicePixelRatio,\n]);\nwrapper.appendChild(stage.canvas);\n\n// render\nconst render = new Render({ ctx: stage.ctx, node: stage });\n\n// root\nconst rootNode = new RootNode({ stage, render });\nstage.appendNode(rootNode);\n\n// interactive\nconst interactive = new Interactive({ stage, render, node: rootNode });\ndragNode(interactive);\n\nconst url = new URL(location.href);\nconst iframe = url.searchParams.get('iframe');\nif (iframe) {\n  const website = new Iframe({\n    width: 1400 * 2,\n    height: 1640 * 10,\n    src: iframe,\n  });\n  rootNode.appendNode(website);\n}\n\n// funcitons\nconst pasteImages = new PasteImages({\n  stage,\n  render,\n  rootNode,\n});\npasteImages.init();\n\n// let rect: Rectangle;\n// const modifySize = () => {\n//   rect.setSize([rect.width + interactive.mouseMoveVec2[0], rect.height + interactive.mouseMoveVec2[1]]);\n// };\n// interactive.register('tapstart', () => {\n//   rect = new Rectangle({ backgroundColor: [255, 0, 0, 0.4] });\n//   rect.setPostion(interactive.logicPoint);\n//   rootNode.appendNode(rect);\n//   interactive.register('tapmove', modifySize);\n// });\n\n// interactive.register('tapend', () => {\n//   interactive.removeEvent('tapmove', modifySize);\n// });\n","import { Node } from '../node';\nimport { layoutNode } from '../layout';\nimport { renderNode } from './util';\n\ninterface ClassParam {\n  ctx?: CanvasRenderingContext2D;\n  node?: Node;\n}\n\nclass Render {\n  public ctx: CanvasRenderingContext2D | undefined;\n\n  public node: Node | undefined;\n\n  private rQA = 0;\n\n  constructor(params?: ClassParam) {\n    this.ctx = params?.ctx;\n    this.node = params?.node;\n  }\n\n  // 渲染所有节点使用\n  public drawFrame(callback?: Function) {\n    if (this.rQA) return;\n    this.rQA = requestAnimationFrame(() => {\n      this.layout();\n      this.render();\n      this.rQA = 0;\n      if (callback) {\n        callback();\n      }\n    });\n  }\n\n  private layout() {\n    if (!this.node) return;\n    layoutNode(this.node);\n  }\n\n  private render() {\n    if (!this.ctx || !this.node) return;\n    this.ctx.clearRect(0, 0, this.node.width, this.node.height);\n    renderNode(this.ctx, this.node);\n  }\n}\n\nexport default Render;\n","import { Vec2 } from '../types';\nimport Node from '../node/node';\n\nconst getClientPoint = (canvas: HTMLCanvasElement, point: Vec2): Vec2 => {\n  const rect = canvas.getBoundingClientRect();\n  return [point[0] - rect.x, point[1] - rect.y];\n};\n\nconst getNodeByPoint = (node: Node, point: Vec2): Node[] => {\n  const nodes: Node[] = [];\n  const getNode = (node: Node) => {\n    if (node.enableClick && node.isBoundingBox(point)) {\n      nodes.push(node);\n    }\n    if (node.children.length > 0) {\n      node.children.forEach((node) => {\n        getNode(node);\n      });\n    }\n  };\n  getNode(node);\n  return nodes;\n};\n\nconst selectNodeByPoint = (node: Node, canvasPoint: Vec2) => {\n  // get all nodes hit when tapdown or mouse down\n  const allNodesHit = getNodeByPoint(node, canvasPoint);\n  if (allNodesHit.length === 0) {\n    return node;\n  }\n  // default select is rootNode\n  // get the node with the highest zIndex\n  allNodesHit.sort((a, b) => a.zIndex - b.zIndex);\n  const selectedNode = allNodesHit[allNodesHit.length - 1];\n  // sort the selected node at the end of the list for priority display\n  if (selectedNode.parent) {\n    for (let i = 0; i < selectedNode.parent.children.length; i++) {\n      if (selectedNode === selectedNode.parent.children[i]) {\n        selectedNode.parent.children.push(selectedNode.parent.children.splice(i, 1)[0]);\n        break;\n      }\n    }\n  }\n  return selectedNode;\n};\n\nexport { getClientPoint, getNodeByPoint, selectNodeByPoint };\n","export const KeyCodeMap = {\n  // todo 加上 mac\n  AltLeft: 18,\n  AltRight: 254,\n  ArrowDown: 40,\n  ArrowLeft: 37,\n  ArrowRight: 39,\n  ArrowUp: 38,\n  Backslash: 220,\n  Backspace: 8,\n  BracketLeft: 219,\n  BracketRight: 221,\n  Comma: 188,\n  ControlLeft: 17,\n  ControlRight: 253,\n  CapsLock: 20,\n  Delete: 46,\n  Digit0: 48,\n  Digit1: 49,\n  Digit2: 50,\n  Digit3: 51,\n  Digit4: 52,\n  Digit5: 53,\n  Digit6: 54,\n  Digit7: 55,\n  Digit8: 56,\n  Digit9: 57,\n  Enter: 13,\n  Equal: 187,\n  Escape: 27,\n  F1: 112,\n  F2: 113,\n  F3: 114,\n  F4: 115,\n  F5: 116,\n  F6: 117,\n  F7: 118,\n  F8: 119,\n  F9: 120,\n  F10: 121,\n  F11: 122,\n  F12: 123,\n  Insert: 45,\n  KeyA: 65,\n  KeyB: 66,\n  KeyC: 67,\n  KeyD: 68,\n  KeyE: 69,\n  KeyF: 70,\n  KeyG: 71,\n  KeyH: 72,\n  KeyI: 73,\n  KeyJ: 74,\n  KeyK: 75,\n  KeyL: 76,\n  KeyM: 77,\n  KeyN: 78,\n  KeyO: 79,\n  KeyP: 80,\n  KeyQ: 81,\n  KeyR: 82,\n  KeyS: 83,\n  KeyT: 84,\n  KeyU: 85,\n  KeyV: 86,\n  KeyW: 87,\n  KeyX: 88,\n  KeyY: 89,\n  KeyZ: 90,\n  MetaLeft: 91,\n  MetaRight: 255,\n  Minus: 189,\n  NumLock: 144,\n  Numpad0: 96,\n  Numpad1: 97,\n  Numpad2: 98,\n  Numpad3: 99,\n  Numpad4: 100,\n  Numpad5: 101,\n  Numpad6: 102,\n  Numpad7: 103,\n  Numpad8: 104,\n  Numpad9: 105,\n  NumpadAdd: 107,\n  NumpadDecimal: 110,\n  NumpadDivide: 111,\n  NumpadEnter: 251,\n  NumpadMultiply: 106,\n  NumpadSubtract: 109,\n  PageDown: 34,\n  PageUp: 33,\n  Period: 190,\n  Quote: 222,\n  Semicolon: 186,\n  ShiftLeft: 16,\n  ShiftRight: 252,\n  Slash: 191,\n  Space: 32,\n  Tab: 9,\n  Backquote: 192,\n};\n","import { Vec2 } from '../types';\nimport { Interactive } from './index';\n\nconst dragNode = (interactive: Interactive) => {\n  interactive.register('tapmove', () => {\n    interactive.showDebuggerWhenMove();\n    if (interactive.selectedNode.enableDrag === false) return;\n    if (interactive.selectedNode === interactive.node) { // 这里是啥\n      interactive.mouseMoveVec2 = interactive.mouseMoveVec2.map((num) => num * interactive.node.scale) as Vec2;\n    }\n    // Update selected interactive.node position\n    if (interactive.isMouseDown) {\n      interactive.selectedNode.setPostion([\n        interactive.selectedNode.x + interactive.mouseMoveVec2[0],\n        interactive.selectedNode.y + interactive.mouseMoveVec2[1],\n      ]);\n    }\n  });\n};\n\nexport default dragNode;\n","/* eslint-disable */\nexport default function potpack(boxes) {\n  // calculate total box area and maximum box width\n  let area = 0;\n  let maxWidth = 0;\n\n  for (const box of boxes) {\n    area += box.width * box.height;\n    maxWidth = Math.max(maxWidth, box.width);\n  }\n\n  // sort the boxes for insertion by height, descending\n  boxes.sort((a, b) => b.height - a.height);\n\n  // aim for a squarish resulting container,\n  // slightly adjusted for sub-100% space utilization\n  const startWidth = Math.max(Math.ceil(Math.sqrt(area / 0.95)), maxWidth);\n\n  // start with a single empty space, unbounded at the bottom\n  const spaces = [{ x: 0, y: 0, width: startWidth, height: Infinity }];\n\n  let width = 0;\n  let height = 0;\n\n  for (const box of boxes) {\n    // look through spaces backwards so that we check smaller spaces first\n    for (let i = spaces.length - 1; i >= 0; i--) {\n      const space = spaces[i];\n\n      // look for empty spaces that can accommodate the current box\n      if (box.width > space.width || box.height > space.height) continue;\n\n      // found the space; add the box to its top-left corner\n      // |-------|-------|\n      // |  box  |       |\n      // |_______|       |\n      // |         space |\n      // |_______________|\n      box.x = space.x;\n      box.y = space.y;\n\n      height = Math.max(height, box.y + box.height);\n      width = Math.max(width, box.x + box.width);\n\n      if (box.width === space.width && box.height === space.height) {\n        // space matches the box exactly; remove it\n        const last = spaces.pop();\n        if (i < spaces.length) spaces[i] = last;\n      } else if (box.height === space.height) {\n        // space matches the box height; update it accordingly\n        // |-------|---------------|\n        // |  box  | updated space |\n        // |_______|_______________|\n        space.x += box.width;\n        space.width -= box.width;\n      } else if (box.width === space.width) {\n        // space matches the box width; update it accordingly\n        // |---------------|\n        // |      box      |\n        // |_______________|\n        // | updated space |\n        // |_______________|\n        space.y += box.height;\n        space.height -= box.height;\n      } else {\n        // otherwise the box splits the space into two spaces\n        // |-------|-----------|\n        // |  box  | new space |\n        // |_______|___________|\n        // | updated space     |\n        // |___________________|\n        spaces.push({\n          x: space.x + box.width,\n          y: space.y,\n          width: space.width - box.width,\n          height: box.height,\n        });\n        space.y += box.height;\n        space.height -= box.height;\n      }\n      break;\n    }\n  }\n\n  return {\n    w: width, // container width\n    h: height, // container height\n    fill: (area / (width * height)) || 0, // space utilization\n  };\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t179: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkIds[i]] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunk\"] = self[\"webpackChunk\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [640], () => (__webpack_require__(329)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","constructor","this","events","register","type","eventFunc","push","removeEvent","Array","i","len","length","splice","trigger","data","call","deepClone","t","obj","toString","Object","prototype","o","ni","color","imagesCache","Map","loadImage","src","callback","has","get","img","Image","crossOrigin","onload","set","onerror","renderPoint","ctx","node","beginPath","moveTo","drawPoints","index","lineTo","closePath","fill","lineWidth","stroke","renderNode","visible","drawCurrentObject","children","sort","a","b","zIndex","forEach","drawBackgroundColor","save","styles","fillStyle","join","strokeStyle","setDrawStyle","beforeDraw","draw","afterDraw","restore","backgroundColor","document","createElement","getContext","xA","yA","xB","yB","Math","sqrt","params","super","name","id","x","y","width","height","active","translate","scale","origin","rotate","enableDrag","enableClick","parent","points","layout","skew","flip","matrix","extra","opacity","appendNode","sprite","item","includes","removeNode","child","setSize","size","getSize","setTranslate","getTranslate","getPostion","setPostion","position","setRotate","value","getParams","spriteConfig","getOwnPropertyNames","clone","beforeLayout","afterLayout","isBoundingBox","point","result","isPointInPath","isInPath","getNodeByPoint","nodes","getNode","globalAlpha","drawGeneralShape","applyToPoint","c","e","d","f","applyToPoints","newPoints","concat","isUndefined","val","tx","ty","transform","matrices","multiply","m1","m2","isArray","Error","rest","compose","Matrix","cos","sin","PI","angle","cx","cy","cosAngle","sinAngle","rotationMatrix","sx","sy","undefined","scaleMatrix","tan","ax","ay","Stage","defaultParam","canvas","wrapper","font","style","setAttribute","screenCoordToLogicPoint","clientPoint","denom","inverse","devicePixelRatio","console","error","window","calculatePosition","leftTop","self","rightTop","rightBottom","leftBottom","center","leftCenter","rightCenter","repeat","init","updateSrc","K","atan","pattern","createPattern","fillRect","drawImage","debuggerNode","cssText","body","appendChild","deviceAdapter","Mobile","tapstart","tapmove","tapend","getPosition","event","touches","clientX","clientY","PC","platform","test","navigator","userAgent","lockOrigin","spacePressed","step","fontColor","lineColor","pointYNums","defaultParams","parentWidth","stepScale","max","round","lineCap","verticalLineNums","ceil","horizontalLineNums","horizontalRemainder","horizontalYSteps","floor","verticalRemainder","verticalXSteps","textAlign","fillText","iframeWin","pointerEvents","addEventListener","deleteBtn","initFlipBtn","initDeleteBtn","bindParent","parentNode","unBindParent","autoFlip","flipBtn","Func","stage","render","rootNode","getElementById","clientWidth","clientHeight","rQA","drawFrame","requestAnimationFrame","layoutCurrentNode","currentNode","curparent","mixMatrix","calculateNodeMatrix","map","num","layoutNode","clearRect","coordinate","onresize","interactive","mouseMoveVec2","selectedNode","addTouchOrMouseEventListener","addShortcutEventListener","addMousewheelListener","touchOrMouseEvent","startP","endP","latestClientPoint","rect","getBoundingClientRect","getClientPoint","latestLogicPoint","logicPoint","canvasPoint","isMouseDown","allNodesHit","selectNodeByPoint","showDebuggerWhenMove","innerHTML","bind","onmousewheel","currentMouseCanvasPoint","RX","RY","newMtx","deltaY","min","keyCode","URL","location","href","searchParams","website","newkey","handleDragImages","handlerPasteImages","stopPropagation","preventDefault","files","dataTransfer","handleFiles","clipboardData","items","indexOf","reader","FileReader","readerFiles","count","file","theFile","imgData","srcElement","receiveImg","readAsDataURL","imagedata","image","boxes","area","maxWidth","box","spaces","Infinity","space","last","pop","potpack","filter","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","m","O","chunkIds","fn","priority","notFulfilled","fulfilled","j","keys","every","key","r","prop","hasOwnProperty","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","__webpack_exports__"],"sourceRoot":""}